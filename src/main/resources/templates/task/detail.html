<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org">
<head th:replace="fragments/header::header">
    <title>debTask</title>
</head>
<body>
<script th:src="@{/js/task/detail.js}"></script>
<div th:replace="fragments/nav::nav"></div>
<div class="container">
    <div class="card">
        <div class="card-header">
            <h5 th:text="${task.company.company}"></h5>
            <a th:href="${'http://www.'+task.company.site_url}" target='_blank'>기업사이트</a>
        </div>
        <div class="card-body">
            <h3 th:text="${task.task_title}"></h3>
            <th:block th:each="taskDetail, num:${task.taskDetails}">
                <table class="table">
                    <thead style="border-top: white;border-left: white;border-right: white;">
                        <tr scope="col">
                            <th colspan="2">
                                <span th:text="'TASK # '+${taskDetail.task_subject}" style="font-size: 25px;"></span>
                                <span th:text="'(지원인원 : '+${taskDetail.taskSupports.size()}+')'" style="color: gray;"></span>
                            </th>
                            <th>
                                <button type="button"  class="btn btn-secondary" style="float:right;"
                                        sec:authorize="hasAuthority('ROLE_DEV')"
                                        th:id="${taskDetail.id}" th:value="supported"
                                        onclick="javascript:taskSupport(this.value, this.id);"
                                        th:if="*{supportUser.get(num.index) != 'notSupport'}">지원완료
                                </button>
                                <button type="button"  class="btn btn-success" style="float:right;"
                                        sec:authorize="hasAuthority('ROLE_DEV')"
                                        th:id="${taskDetail.id}" th:value="${taskDetail.task_subject}"
                                        onclick="javascript:taskSupport(this.value, this.id);"
                                        th:if="*{supportUser.get(num.index) == 'notSupport'}">지원하기
                                </button>
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <th scope="row" style="width: 15%;">과제분야</th>
                            <td th:text="${taskDetail.task_part}" colspan="2"></td>
                        </tr>
                        <tr>
                            <th scope="row">모집인원</th>
                            <td th:text="${taskDetail.task_part_personnel}" colspan="2"></td>
                        </tr>
                        <tr>
                            <th scope="row">과제 소요 기간</th>
                            <td th:text="${taskDetail.tasking_day}" colspan="2"></td>
                        </tr>
                        <tr>
                            <th scope="row">과제 마감 기간</th>
                            <td th:text="${task.task_dead_day}" colspan="2"></td>
                        </tr>
                        <tr>
                            <th scope="row">주요스킬</th>
                            <td th:text="${taskDetail.task_need_skill}" colspan="2"></td>
                        </tr>
                    </tbody>
                </table>
            </th:block>
            <br />
            <a th:href="@{'/task/list'}">목록</a>
        </div>
    </div>
</div>
</body>
</html>